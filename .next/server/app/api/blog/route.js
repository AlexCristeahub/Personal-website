"use strict";(()=>{var e={};e.id=342,e.ids=[342],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8388:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>D,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var s={};o.r(s),o.d(s,{GET:()=>u});var r=o(3278),a=o(5002),n=o(4877),l=o(1309),i=o(941);async function u(){try{console.log("\uD83D\uDD0D API called with:",{token:process.env.NOTION_TOKEN?"EXISTS":"MISSING",dbId:process.env.NOTION_DATABASE_ID?"EXISTS":"MISSING",dbIdValue:process.env.NOTION_DATABASE_ID}),console.log("\uD83D\uDCDD Blog API: Starting fetch...");let e=await (0,i.u3)();console.log("\uD83D\uDCDD Blog API: Fetched",e.length,"posts"),e.length>0&&console.log("\uD83D\uDCCA First post details:",{title:e[0].title,published:e[0].published,tags:e[0].tags,slug:e[0].slug});let t=[...new Set(e.flatMap(e=>e.tags))];return console.log("\uD83C\uDFF7ï¸ All unique tags found:",t),l.NextResponse.json({posts:e,debug:{totalPosts:e.length,allTags:t,hasNotionToken:!!process.env.NOTION_TOKEN,hasNotionDatabase:!!process.env.NOTION_DATABASE_ID,timestamp:new Date().toISOString()}})}catch(e){return console.error("\uD83D\uDCDD Blog API Error:",e),console.error("\uD83D\uDCDD Error stack:",e instanceof Error?e.stack:"No stack trace"),l.NextResponse.json({error:"Failed to fetch blog posts",details:e instanceof Error?e.message:"Unknown error",debug:{hasNotionToken:!!process.env.NOTION_TOKEN,hasNotionDatabase:!!process.env.NOTION_DATABASE_ID,timestamp:new Date().toISOString()}},{status:500})}}let c=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/blog/route",pathname:"/api/blog",filename:"route",bundlePath:"app/api/blog/route"},resolvedPagePath:"/Users/alex/Downloads/personal/Personal-website/app/api/blog/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:g}=c,D="/api/blog/route";function h(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},941:(e,t,o)=>{o.d(t,{u3:()=>a});let s=[{id:"1",title:"Welcome to My Blog",slug:"welcome",published:!0,publishedDate:"2024-01-01",lastEditedTime:"2024-01-01",tags:["welcome","blog"],excerpt:"Welcome to my personal blog where I share thoughts on technology and entrepreneurship.",cover:""}],r=null;if(process.env.NOTION_TOKEN)try{let{Client:e}=o(9081);r=new e({auth:process.env.NOTION_TOKEN})}catch(e){console.warn("Notion client initialization failed, using mock data")}let a=async function(){if(!r||!process.env.NOTION_DATABASE_ID)return console.warn("Using mock data for static generation"),s;try{return(await r.databases.query({database_id:process.env.NOTION_DATABASE_ID,filter:{property:"Published",checkbox:{equals:!0}},sorts:[{property:"Published Date",direction:"descending"}]})).results.map(e=>{let t=e.properties;return{id:e.id,title:t.Title?.title?.[0]?.plain_text||"Untitled",slug:t.Slug?.rich_text?.[0]?.plain_text||"",published:t.Published?.checkbox||!1,publishedDate:t["Published Date"]?.date?.start||"",lastEditedTime:e.last_edited_time,tags:t.Tags?.multi_select?.map(e=>e.name)||[],excerpt:t.Excerpt?.rich_text?.[0]?.plain_text||"",cover:e.cover?.external?.url||e.cover?.file?.url||""}})}catch(e){return console.error("Error fetching blog posts:",e),s}}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),s=t.X(0,[787,793],()=>o(8388));module.exports=s})();