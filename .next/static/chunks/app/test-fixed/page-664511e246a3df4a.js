(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{8475:function(s,e,l){Promise.resolve().then(l.bind(l,4968))},4968:function(s,e,l){"use strict";l.r(e),l.d(e,{default:function(){return n}});var d=l(7437),a=l(2265);function n(){var s,e,l,n,i,r,o,t,c,h,u,x,g;let[j,m]=(0,a.useState)(null),[b,v]=(0,a.useState)(null),[p,N]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async function(){try{let s=await fetch("/api/check-notion-methods",{cache:"no-store"}),e=await s.json();v(e);let l=await fetch("/api/blog-fixed",{cache:"no-store"}),d=await l.json();m(d)}catch(s){m({error:s instanceof Error?s.message:"Unknown error"})}finally{N(!1)}})()},[]),p)?(0,d.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDD27 Testing Fixed API..."}),(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]}):(0,d.jsxs)("div",{className:"p-8 max-w-6xl mx-auto",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDD27 Fixed API Test Results"}),(0,d.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-6 rounded-lg mb-6",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDD0D Available Notion Methods"}),(null==b?void 0:b.success)?(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Notion Version:"})," ",b.notionVersion]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Has databases.query:"})," ",(null===(s=b.methods)||void 0===s?void 0:s.hasDatabaseQuery)?"✅ Yes":"❌ No"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Has dataSources.query:"})," ",(null===(e=b.methods)||void 0===e?void 0:e.hasDataSourcesQuery)?"✅ Yes":"❌ No"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Available methods:"})," ",null===(n=b.methods)||void 0===n?void 0:null===(l=n.availableMethods)||void 0===l?void 0:l.join(", ")]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Database methods:"})," ",null===(r=b.methods)||void 0===r?void 0:null===(i=r.databaseMethods)||void 0===i?void 0:i.join(", ")]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"DataSources methods:"})," ",null===(t=b.methods)||void 0===t?void 0:null===(o=t.dataSourcesMethods)||void 0===o?void 0:o.join(", ")]})]}):(0,d.jsxs)("p",{className:"text-red-600",children:["Error: ",null==b?void 0:b.error]})]}),(null==j?void 0:j.posts)?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-green-100 dark:bg-green-900/20 p-6 rounded-lg",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"✅ Fixed API Success!"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Total Posts:"})," ",null===(c=j.debug)||void 0===c?void 0:c.totalPosts]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"All Tags Found:"})," ",(null===(u=j.debug)||void 0===u?void 0:null===(h=u.allTags)||void 0===h?void 0:h.length)>0?j.debug.allTags.join(", "):"No tags found"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Data Source ID:"})," ",null===(x=j.debug)||void 0===x?void 0:x.dataSourceId]})]})]}),(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCDD Posts with Tags:"}),(0,d.jsx)("div",{className:"space-y-4",children:null===(g=j.posts)||void 0===g?void 0:g.map((s,e)=>{var l;return(0,d.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded border",children:[(0,d.jsx)("h3",{className:"font-bold text-lg",children:s.title}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Published:"})," ",s.published?"Yes":"No"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Tags:"}),(null===(l=s.tags)||void 0===l?void 0:l.length)>0?(0,d.jsx)("span",{className:"ml-2",children:s.tags.map((s,e)=>(0,d.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs mr-1",children:s},e))}):(0,d.jsx)("span",{className:"text-red-600 ml-2",children:"No tags"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Slug:"})," ",s.slug]})]},e)})})]})]}):(0,d.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/20 p-6 rounded-lg",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"❌ Error"}),(0,d.jsx)("p",{children:(null==j?void 0:j.error)||(null==j?void 0:j.details)}),(null==j?void 0:j.debug)&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("p",{children:(0,d.jsx)("strong",{children:"Debug Info:"})}),(0,d.jsx)("pre",{className:"text-xs bg-white dark:bg-black p-3 rounded mt-2",children:JSON.stringify(j.debug,null,2)})]})]}),(0,d.jsxs)("div",{className:"mt-8 p-4 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:[(0,d.jsx)("h3",{className:"font-bold mb-2",children:"\uD83C\uDFAF What This Test Does:"}),(0,d.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[(0,d.jsx)("li",{children:"Checks what Notion API methods are available"}),(0,d.jsx)("li",{children:"Uses the dataSources.query method (which your client supports)"}),(0,d.jsx)("li",{children:"Improved tag extraction with better error handling"}),(0,d.jsx)("li",{children:"Shows detailed debugging of the tag extraction process"}),(0,d.jsx)("li",{children:"Displays exactly what tags are found for each post"})]})]})]})}}},function(s){s.O(0,[971,117,744],function(){return s(s.s=8475)}),_N_E=s.O()}]);