(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{7866:function(s,e,l){Promise.resolve().then(l.bind(l,710))},710:function(s,e,l){"use strict";l.r(e),l.d(e,{default:function(){return t}});var a=l(7437),r=l(2265);function t(){var s,e,l,t,n;let[d,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async function(){try{let s=await fetch("/api/test-notion",{cache:"no-store"}),e=await s.json();i(e)}catch(s){i({error:s instanceof Error?s.message:"Unknown error"})}finally{o(!1)}})()},[]),c)?(0,a.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83E\uDDEA Testing Standard Notion API..."}),(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]}):(0,a.jsxs)("div",{className:"p-8 max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83E\uDDEA Standard Notion API Test"}),(null==d?void 0:d.success)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-green-100 dark:bg-green-900/20 p-6 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"✅ Success!"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Total Posts:"})," ",d.totalPosts]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"All Tags Found:"})," ",(null===(s=d.allTags)||void 0===s?void 0:s.length)>0?d.allTags.join(", "):"No tags found"]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-6 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCDD Posts with Tags:"}),(0,a.jsx)("div",{className:"space-y-4",children:null===(e=d.posts)||void 0===e?void 0:e.map((s,e)=>{var l;return(0,a.jsxs)("div",{className:"bg-white dark:bg-black p-4 rounded border",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:s.title}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Published:"})," ",s.published?"Yes":"No"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tags:"})," ",(null===(l=s.tags)||void 0===l?void 0:l.length)>0?s.tags.join(", "):"No tags"]}),s.rawTagsProperty&&(0,a.jsxs)("details",{className:"mt-2",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm text-gray-600",children:"Raw Tags Property"}),(0,a.jsx)("pre",{className:"text-xs mt-2 bg-gray-100 p-2 rounded",children:JSON.stringify(s.rawTagsProperty,null,2)})]})]},e)})})]}),(0,a.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDD0D Debug Info:"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Available Properties:"})," ",null===(t=d.debug)||void 0===t?void 0:null===(l=t.firstPostProperties)||void 0===l?void 0:l.join(", ")]}),(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:"First Post Tags Raw:"})}),(0,a.jsx)("pre",{className:"bg-white dark:bg-black p-3 rounded text-xs",children:JSON.stringify(null===(n=d.debug)||void 0===n?void 0:n.firstPostTagsRaw,null,2)})]})]})]}):(0,a.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/20 p-6 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"❌ Error"}),(0,a.jsx)("p",{children:null==d?void 0:d.error}),(null==d?void 0:d.stack)&&(0,a.jsxs)("details",{className:"mt-4",children:[(0,a.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,a.jsx)("pre",{className:"text-xs mt-2 bg-white dark:bg-black p-3 rounded",children:d.stack})]})]}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-bold mb-2",children:"\uD83C\uDFAF What This Test Does:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"Uses the standard Notion API (not dataSources)"}),(0,a.jsx)("li",{children:"Queries your database directly"}),(0,a.jsx)("li",{children:"Shows raw tag properties from Notion"}),(0,a.jsx)("li",{children:"Extracts tags using the standard method"}),(0,a.jsx)("li",{children:"Shows exactly what tags are found"})]})]})]})}}},function(s){s.O(0,[971,117,744],function(){return s(s.s=7866)}),_N_E=s.O()}]);